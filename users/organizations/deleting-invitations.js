const Screenshots = require('../../screenshots.js')

module.exports = async (device) => {
  await Screenshots.createUser(device, 'owner')
  const user = await Screenshots.createUser(device)
  await user.hover('Account')
  await user.click('Manage organizations')
  await user.click('Create organization', true)
  await user.fill({
    name: user.lastName + ' Family',
    email: 'family@' + user.lastName.toLowerCase() + '.com'
  })
  await user.click('Create organization', true)
  user.organizationid = await user.organizationid()
  await user.hover('Account')
  await user.click('Manage organizations')
  await user.click(user.organizationid, true)
  await user.click('Create invitation')
  await user.fill({
    code: 'something-secret'
  })
  await user.click('Create invitation', true)
  user.invitationid = await user.invitationid()
  await user.home()
  await user.hover('Account')
  await user.hover('Manage organizations')
  await user.screenshot('Click "Manage organizations"')
  await user.hover('Account')
  await user.click('Manage organizations')
  await user.hover(user.organizationid, true)
  await user.screenshot('Click organization to delete invitation for')
  await user.hover(user.organizationid, true)
  await user.click(user.organizationid, true)
  await user.hover('Invitations')
  await user.screenshot('Click "Invitations"')
  await user.hover('Invitations')
  await user.click('Invitations')
  await user.hover(user.invitationid, true)
  await user.screenshot('Click invitation to delete')
  await user.hover(user.invitationid, true)
  await user.click(user.invitationid, true)
  await user.hover('Delete invitation')
  await user.screenshot('Click "Delete invitation"')
  await user.hover('Delete invitation')
  await user.click('Delete invitation')
  await user.hover('Delete', true)
  await user.screenshot('Submit form')
  await user.hover('Delete', true)
  await user.click('Delete', true)
  await user.screenshot('Success')
}
